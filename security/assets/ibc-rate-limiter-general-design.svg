<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 697.5545405301747 376.1461471380107" width="697.5545405301747" height="376.1461471380107">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="697.5545405301747" height="376.1461471380107" fill="#ffffff"></rect><g transform="translate(45.672972430840105 10) rotate(0 87 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">IBC Rate Limiter</text></g><g transform="translate(73.6729724308401 38.5) rotate(0 59 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">General Design</text></g><g stroke-linecap="round" transform="translate(111.73300889874542 107.02615348025512) rotate(0 84.5 22.5)"><path d="M11.25 0 M11.25 0 C52.49 0.26, 93.12 1.58, 157.75 0 M11.25 0 C42.38 1.09, 74.48 0.1, 157.75 0 M157.75 0 C165.29 -0.76, 168.32 4.27, 169 11.25 M157.75 0 C164.03 -0.85, 167.23 2.76, 169 11.25 M169 11.25 C170.25 21.24, 169.11 28.75, 169 33.75 M169 11.25 C167.96 16.69, 169.18 22.86, 169 33.75 M169 33.75 C168.94 39.66, 164.34 43.1, 157.75 45 M169 33.75 C170.3 39.7, 164.36 46.59, 157.75 45 M157.75 45 C117 42.93, 75.88 44.36, 11.25 45 M157.75 45 C117.73 45.7, 77.48 45.26, 11.25 45 M11.25 45 C3.96 44.25, -1.8 43.24, 0 33.75 M11.25 45 C3.28 46.67, 0.92 43.44, 0 33.75 M0 33.75 C0.24 27.94, 1.33 22.68, 0 11.25 M0 33.75 C0.71 26.53, -0.03 21.08, 0 11.25 M0 11.25 C-0.9 2.35, 2.89 0.26, 11.25 0 M0 11.25 C1.82 3.07, 5.86 -1.66, 11.25 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(111.73300889874542 84.02615348025512) rotate(0 26.5 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">ICS20</text></g><g transform="translate(128.23300889874542 118.20153797367351) rotate(0 74.5 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">sendFungibleTokens</text></g><g stroke-linecap="round" transform="translate(111.73300889874542 209.81384176306153) rotate(0 287.9107658157146 37.429229427602166)"><path d="M18.71 0 M18.71 0 C155.99 -1.92, 295.09 -1.83, 557.11 0 M18.71 0 C161.84 0.3, 304.75 0.65, 557.11 0 M557.11 0 C568.4 -0.51, 574.7 8.16, 575.82 18.71 M557.11 0 C571.7 2.04, 576.93 4.03, 575.82 18.71 M575.82 18.71 C575.03 31.28, 574.91 46.77, 575.82 56.14 M575.82 18.71 C575.24 33.81, 575.66 48.11, 575.82 56.14 M575.82 56.14 C574 69.51, 570.13 76.36, 557.11 74.86 M575.82 56.14 C576.3 68.04, 568.05 73.18, 557.11 74.86 M557.11 74.86 C402.09 76.04, 247.83 75.71, 18.71 74.86 M557.11 74.86 C352.72 75.64, 147.95 75.32, 18.71 74.86 M18.71 74.86 C5.67 73.49, 1.81 66.9, 0 56.14 M18.71 74.86 C4.8 75.89, 0.06 66.92, 0 56.14 M0 56.14 C-1.36 42.84, -1.28 29.97, 0 18.71 M0 56.14 C0.18 41.98, 1.11 29.08, 0 18.71 M0 18.71 C1.09 6.75, 4.66 -1.15, 18.71 0 M0 18.71 C-2.01 8.48, 4.69 -0.14, 18.71 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(111.73300889874542 190.81384176306153) rotate(0 65 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">IBC rate limiter</text></g><g transform="translate(125.73300889874542 247.98922625647992) rotate(0 46 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#364fc7" text-anchor="start" style="white-space: pre;" direction="ltr">SendPacket</text></g><g transform="translate(269.81915920787833 248.63845726964314) rotate(0 105 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#364fc7" text-anchor="start" style="white-space: pre;" direction="ltr">checkAndUpdateRateLimits</text></g><g stroke-linecap="round" transform="translate(111.73300889874542 321.1461471380107) rotate(0 58.52461154267888 22.5)"><path d="M11.25 0 M11.25 0 C33.42 1.03, 53.82 -1.34, 105.8 0 M11.25 0 C48.19 -1.26, 85.13 -0.24, 105.8 0 M105.8 0 C113.36 0.16, 118.57 4.7, 117.05 11.25 M105.8 0 C111.99 -1.61, 117.81 4.83, 117.05 11.25 M117.05 11.25 C117.36 17.44, 116.49 24.03, 117.05 33.75 M117.05 11.25 C116.2 19.47, 116.1 27.73, 117.05 33.75 M117.05 33.75 C115.8 40.97, 114.57 45.21, 105.8 45 M117.05 33.75 C116.55 41.27, 114.5 44.23, 105.8 45 M105.8 45 C68.25 45.76, 30.79 44.72, 11.25 45 M105.8 45 C81.36 45.36, 56.96 44.49, 11.25 45 M11.25 45 C2.41 45.1, 0.65 42.87, 0 33.75 M11.25 45 C1.46 44.54, -1.52 41.18, 0 33.75 M0 33.75 C1.72 28.29, -1.01 22.39, 0 11.25 M0 33.75 C-1.09 26.21, 0.67 20.26, 0 11.25 M0 11.25 C0.17 5.12, 3.3 1.21, 11.25 0 M0 11.25 C-2.14 5.85, 3.86 -2.2, 11.25 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(111.73300889874542 298.9707626445923) rotate(0 30 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">ICS 04</text></g><g transform="translate(130.80377947114323 333.1461471380107) rotate(0 46 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">SendPacket</text></g><g stroke-linecap="round"><g transform="translate(218.73300889874542 258.948141477124) rotate(0 20.662589813492502 -0.18743480951303582)"><path d="M1.09 0.56 C7.94 0.39, 34.38 -1.04, 41.12 -0.93 M0.2 -0.19 C6.86 -0.26, 33.18 0.08, 39.93 0.01" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(218.73300889874542 258.948141477124) rotate(0 20.662589813492502 -0.18743480951303582)"><path d="M40.69 -0.86 L26.59 5.61 L27.92 -6.09 L40.87 -1.38" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M40.63 -0.58 C34.4 1.95, 32.97 3, 24.96 6.28 M39.98 0.09 C35 1.97, 28.59 5.07, 26.04 6.15 M26.67 6.44 C25.2 2.61, 25.59 -2.39, 27.04 -7.35 M26.63 6.12 C26.04 3.1, 26.69 0.9, 26.27 -6.28 M26.85 -6.48 C32.99 -2.79, 35.73 -2.5, 41.18 -0.78 M25.6 -6.73 C30.87 -4.74, 35.15 -1.9, 40.65 -0.25 M39.93 0.01 C39.93 0.01, 39.93 0.01, 39.93 0.01 M39.93 0.01 C39.93 0.01, 39.93 0.01, 39.93 0.01" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(55.18080653355236 255.03429178625692) rotate(0 0.5414286216731057 36.34593270366355)"><path d="M0.71 -0.55 C0.66 5.78, 0.65 25.32, 0.8 37.62 C0.95 49.92, 1.31 67.31, 1.61 73.24 M-0.38 1.77 C-0.7 8.29, -0.43 27.26, -0.25 38.86 C-0.07 50.46, 0.12 66.01, 0.7 71.4" stroke="#495057" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(55.18080653355236 255.03429178625692) rotate(0 0.5414286216731057 36.34593270366355)"><path d="M1.7 70.01 L-4.86 56.32 L8.07 57.85 L2.57 72.39" stroke="none" stroke-width="0" fill="#495057" fill-rule="evenodd"></path><path d="M0.01 71.16 C-2.77 65.91, -3.68 61.95, -5.27 57.53 M1.09 70.93 C-1.78 67.99, -2.7 63.61, -5.8 57.7 M-7.58 57.45 C-2.72 57.06, -1.74 58.97, 5.32 58.35 M-6.53 57.81 C-1.37 57.98, 3.3 57.07, 5.76 57.3 M5.19 57.07 C4.19 63.5, 2.49 68.82, -0.48 71.58 M5.7 56.97 C4.59 63.17, 1.57 67.42, 0.06 71.64 M0.7 71.4 C0.7 71.4, 0.7 71.4, 0.7 71.4 M0.7 71.4 C0.7 71.4, 0.7 71.4, 0.7 71.4" stroke="#495057" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(54.76148293085532 146.28965883850316) rotate(0 0.9607522243701396 36.2473138884576)"><path d="M-0.47 0.93 C-0.25 7.24, 1.13 26.31, 1.6 38.04 C2.07 49.77, 2.51 65.61, 2.36 71.32 M1.49 0.37 C1.58 6.86, 0.92 27.54, 0.98 39.5 C1.04 51.46, 1.94 66.48, 1.84 72.12" stroke="#495057" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(54.76148293085532 146.28965883850316) rotate(0 0.9607522243701396 36.2473138884576)"><path d="M0.33 73.83 L-6.49 58.3 L6.03 58.41 L2.78 73.25" stroke="none" stroke-width="0" fill="#495057" fill-rule="evenodd"></path><path d="M3.01 72.89 C-0.49 68.34, -3.64 61.97, -4.78 58.88 M2.42 71.73 C-1.03 67.25, -3.46 61.38, -5.07 59.02 M-5.59 58.66 C-1.47 59.38, 1.61 58.38, 8.64 58.14 M-5.04 58.35 C-0.97 58.28, 3.14 58.05, 7.99 57.94 M6.74 59.6 C7.48 61.36, 5.49 66.26, 2.87 70.73 M8.63 59.04 C5.69 63.41, 4.65 67.89, 2.36 72.22 M1.84 72.12 C1.84 72.12, 1.84 72.12, 1.84 72.12 M1.84 72.12 C1.84 72.12, 1.84 72.12, 1.84 72.12" stroke="#495057" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(493.96839022104155 219.6384572696432) rotate(0 95.00000000000006 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#364fc7" text-anchor="start" style="white-space: pre;" direction="ltr">RateLimitExceededError</text></g><g transform="translate(595.1960816749702 261.6384572696432) rotate(0 8.5 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#364fc7" text-anchor="start" style="white-space: pre;" direction="ltr">nil</text></g><g stroke-linecap="round"><g transform="translate(488.37146616838857 261.0125825285959) rotate(0 36.73971184598082 -9.072417985838001)"><path d="M0 0.53 C9.43 0.84, 45.62 4.29, 57.71 1.1 C69.8 -2.09, 70.1 -15.22, 72.55 -18.63 M-1.45 -0.24 C8.24 -0.23, 47.22 2.62, 59.95 -0.78 C72.68 -4.17, 72.91 -17.66, 74.93 -20.59" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(488.37146616838857 261.0125825285959) rotate(0 36.73971184598082 -9.072417985838001)"><path d="M73.51 -21.03 L74.83 -7.07 L63.85 -9.01 L76.11 -19.38" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M75.59 -21.7 C76.03 -15.88, 76.95 -10.1, 76.38 -6.11 M74.88 -20.95 C75.18 -16.46, 76.18 -13.3, 76.61 -5.8 M76.66 -6.24 C71.56 -6.51, 67.76 -9.82, 63.57 -10.44 M76.73 -6.24 C73.46 -6.1, 71.28 -6.94, 64.95 -9.96 M65.05 -9.49 C66.24 -12.69, 69.07 -14.36, 75.56 -21.98 M64.03 -9.66 C68.36 -14.07, 72.17 -17.59, 74.41 -20.35 M74.93 -20.59 C74.93 -20.59, 74.93 -20.59, 74.93 -20.59 M74.93 -20.59 C74.93 -20.59, 74.93 -20.59, 74.93 -20.59" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(550.9683902210415 260.6384572696432) rotate(0 16.644804891571425 4.210715243779134)"><path d="M-0.62 0.77 C4.84 2.08, 28.27 5.98, 33.91 7.18 M1.25 0.13 C6.45 1.63, 27.18 6.76, 32.92 8.29" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(550.9683902210415 260.6384572696432) rotate(0 16.644804891571425 4.210715243779134)"><path d="M34.35 6.7 L19.4 10.68 L21.22 0.34 L31.95 8.91" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M33.88 8.18 C26.07 8.3, 21.28 10.23, 19.48 11.88 M32.97 7.59 C29.45 9.36, 24.45 9.71, 17.94 11.64 M18.73 11.2 C19.75 7.15, 20.29 2.12, 21.26 -1.75 M17.74 10.44 C18.57 8.15, 19.05 6.32, 21.31 -0.76 M22.7 -0.62 C23.84 0.11, 27.7 5.41, 34.13 8.18 M21.05 -1.56 C23.38 0.54, 26.54 3.41, 33.13 7.82 M32.92 8.29 C32.92 8.29, 32.92 8.29, 32.92 8.29 M32.92 8.29 C32.92 8.29, 32.92 8.29, 32.92 8.29" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(13.722235155225462 114.60461392102059) rotate(0 42 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#495057" text-anchor="start" style="white-space: pre;" direction="ltr">Application</text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(13.222235155225462 229.33078325688666) rotate(0 42.5 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#495057" text-anchor="start" style="white-space: pre;" direction="ltr">Middleware</text></g><g stroke-opacity="0.9" fill-opacity="0.9" transform="translate(18.222235155225462 334.986182020355) rotate(0 37.5 10)"><text x="0" y="14" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#495057" text-anchor="start" style="white-space: pre;" direction="ltr">IBC Core</text></g><g stroke-linecap="round"><g stroke-opacity="0.7" fill-opacity="0.7" transform="translate(10.371466168388736 172.73077532908115) rotate(0 166.04864422299966 -0.8533369476606936)"><path d="M-0.37 -0.64 C54.98 -0.93, 276.95 -0.88, 332.47 -1.06" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g></g><mask></mask><g stroke-linecap="round"><g stroke-opacity="0.7" fill-opacity="0.7" transform="translate(10.476080089409265 292.404637704437) rotate(0 165.96200136163338 0.009102041024902974)"><path d="M-0.04 1.05 C55.31 1.03, 276.69 -0.78, 331.97 -1.03" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g></g><mask></mask></svg>